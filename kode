import time
import matplotlib.pyplot as plt
from prettytable import PrettyTable

# Rekursif
def count_uppercase_recursive(text, index=0):
    if index == len(text):
        return 0
    if 'A' <= text[index] <= 'Z':
        return 1 + count_uppercase_recursive(text, index + 1)
    return count_uppercase_recursive(text, index + 1)

# Iteratif
def count_uppercase_iterative(text):
    count = 0
    for char in text:
        if 'A' <= char <= 'Z':
            count += 1
    return count

# Data uji
input_sizes = [5, 10, 15, 20, 25]
recursive_times = []
iterative_times = []
uppercase_counts = []

print("Masukkan teks SESUAI panjang yang diminta.\n")

for size in input_sizes:
    while True:
        text = input(f"Masukkan teks dengan panjang {size} karakter: ")
        if len(text) == size:
            break
        print(f"Panjang teks harus {size} karakter")

    # Rekursif
    start = time.time()
    rec_count = count_uppercase_recursive(text)
    recursive_times.append(time.time() - start)

    # Iteratif
    start = time.time()
    iter_count = count_uppercase_iterative(text)
    iterative_times.append(time.time() - start)

    # Simpan jumlah huruf kapital
    uppercase_counts.append(iter_count)

# Tabel hasil
table = PrettyTable()
table.field_names = [
    "Panjang Kalimat",
    "Jumlah Huruf Kapital",
    "Recursive Time (s)",
    "Iterative Time (s)"
]

for i in range(len(input_sizes)):
    table.add_row([
        input_sizes[i],
        uppercase_counts[i],
        f"{recursive_times[i]:.6f}",
        f"{iterative_times[i]:.6f}"
    ])

print("\nHasil Pengujian:")
print(table)

# Grafik
plt.figure(figsize=(8, 6))
plt.plot(input_sizes, recursive_times, marker='o', label='Recursive')
plt.plot(input_sizes, iterative_times, marker='o', label='Iterative')

plt.xlabel("Panjang Kalimat (jumlah karakter)")
plt.ylabel("Waktu Eksekusi (detik)")
plt.title("Perbandingan Waktu Eksekusi Algoritma")
plt.legend()
plt.grid(True)
plt.show()
